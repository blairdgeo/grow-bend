<!DOCTYPE html>
<html>
    <head>
        <meta charset='utf-8' />
        <title>City Layers Map. Layers of Manhattan. Project by Morphocode.</title>
        <meta name='viewport' content='initial-scale=1,maximum-scale=1,user-scalable=no' />

        <script src='lib/mapbox-gl-js/dist/mapbox-gl-dev.js'></script>
        <link href='https://api.tiles.mapbox.com/mapbox-gl-js/v0.2.2/mapbox-gl.css' rel='stylesheet' />

        <script src="lib/d3js/d3.js"></script>
        <script src="lib/jquery/jquery-2.1.1.min.js"></script>
        <script src="lib/jquery/jquery-ui-draggable.min.js"></script>
        <script src="lib/jquery/jquery.cookie.min.js"></script>

        <script src="lib/intro-js/intro.js"></script>
        <link href='lib/intro-js/introjs.css' rel='stylesheet' />

        <link rel="stylesheet" href="lib/bootstrap/lumen.bootstrap.min.css">
        <script src="lib/bootstrap/bootstrap.min.js"></script>

        <script src="js/namespace.js"></script>
        <script src="js/timeline.js"></script>
        <script src="js/mapgl.js"></script>
        <script src="js/ui.js"></script>
        <script src="js/util.js"></script>

        <link href='style/city-layers.css' rel='stylesheet' />

        <script>
            $().ready(function() {
                if (getParameterByName("show") != "true") {
                    $("body").html("Under Construction");
                }

                // build the buttons
                urbanmap.ui.buildToolbar();
                urbanmap.ui.buildDialogs();
                urbanmap.ui.timeline.build();
                // the tour has to be built after the timeline, in order for selectors to work
                // or use cusomt intro.onbeforechange callback
                urbanmap.ui.buildTour();

                // welcome the User
                urbanmap.ui.welcome();

            });

        </script>

    </head>

    <body>

        <nav class="navbar navbar-inverse" role="navigation">
          <div class="container-fluid">
            <div class="navbar-header">
              <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>
              <a class="navbar-brand" href="http://morphocode.com">Morphocode</a>
            </div>

            <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
              <ul class="nav navbar-nav">
                <li class="explore-menu dropdown">
                  <a href="#" data-toggle="dropdown">Explore <span class="caret"></span></a>
                  <ul class="dropdown-menu" role="menu">
                    <li><a id="layer-oldest-buildings" href="#">The 100 oldest buildings</a></li>
                    <li class="divider"></li>
                    <li><a id="layer-most-buildings" href="#">The most build-intense decade</a></li>
                    <li class="divider"></li>
                    <li><a id="layer-newest-buildings" href="#">The newest buildings in Manhattan</a></li>
                  </ul>
                </li>
                <li><a href="#" data-toggle="modal" data-target="#about-dialog">About</a></li>
                <li><a id="help-button" href="#">Help</a></li>
                <li><a id="button-attribution" href="" data-toggle="modal" data-target="#attribution-dialog">Attribution</a></li>
                <li class="share-menu-item"><a id="help-button" href="#">Share:</a></li>
                <li class="share-buttons">
                    <div class="addthis_toolbox addthis_default_style addthis_16x16_style">
                        <a class="addthis_button_facebook"></a>
                        <a class="addthis_button_twitter"></a>
                        <a class="addthis_button_compact"></a>
                    </div>
                </li>
                <li class="follow-buttons">
                    <a class="addthis_button_twitter_follow_native" tw:screen_name="morphocode"></a>
                </li>

              </ul>
              <ul class="nav navbar-nav navbar-right">
                <li><a id="button-project-of" href="#">A project of:</a></li>
                <li><a id="button-morphocode" href="http://morphocode.com/about/" target="_blank"><img src="images/morphocode-logo.jpg" /></a></li>
              </ul>
            </div>

          </div>
        </nav>

        <div id="map"></div>
        <div id="map-controls"></div>

        <!-- Welcome Dialog -->
        <div class="modal" id="about-dialog" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
          <div class="modal-dialog">
            <div class="modal-content">
              <div class="modal-body">
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                    <h1><img src="images/layers-of-nyc-logo-large.png" /><span>Layers of NYC</span></h1>
                  <blockquote>
                ...each block is covered with several layers of phantom architecture in the form of past occupancies, aborted projects and popular fantasies that provide alternative images to the New York that exists." <br /> <br />
                Rem Koolhaas, "Delirious New York"
                </blockquote>

                <p>
                    <strong>Layers of NYC</strong> is an interactive map created by <strong><a href="http://morphocode.com/about/" target="_blank">Morphocode</a></strong> that explores the structure of <strong>Manhattan</strong>'s urban fabric.
                <p>
                The map lets you navigate through historical fragments of the city that have been preserved and are now embedded in Manhattan's densely built environment. The rigid archipelago of building blocks has been mapped as a succession of structural episodes starting from 1765.
                </p>
                <p>Use the timeline sliders to identify some of Manhattan's oldest buildings; discover how the beginning of the 20th century marked the island skyline or to define the distribution of building activity over the last decades.
                </p>

              </div>
              <div class="modal-footer">
                <button type="button" class="btn btn-primary btn-xlarge" id="show-map">Show me the Map</button>
              </div>
            </div>
          </div>
        </div>


        <!-- Attribution Dialog -->
        <div class="modal" id="attribution-dialog" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
          <div class="modal-dialog">
            <div class="modal-content">
              <div class="modal-body">
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                <h1>Attribution</h1>
                 <ul>
                    <li><strong>Data: </strong> Pluto Data Set provided by Department of City Planning (DCP)</li>
                    <li><strong>Basemap: </strong> <a href="http://www.arcgis.com/home/item.html?id=ed712cb1db3e4bae9e85329040fb9a49" target="_blank">Light Gray Canvas Map</a>, Sources: Esri, HERE, DeLorme, MapmyIndia, Â© OpenStreetMap contributors, and the GIS user community </li>
                    <li><strong>UI Controls: </strong> The graph and the sliders were built using the great <a href="http://d3js.org/" target="_blank">d3.js</a> library. </li>
                    <li><strong>Map UI: </strong> We used the ultra impressive <a href="https://www.mapbox.com/mapbox-gl/"> Mapbox GL JS</a> library to show/hide map layers.</li>
                  </ul>
              </div>
            </div>
          </div>
        </div>


    <!-- share buttons -->
    <script type="text/javascript">
        var addthis_config = {
            "data_track_clickback": false
        };
        var addthis_share =
        {
           templates: {
                twitter: 'Check out {{url}} via @morphocode'
           }
        };
    </script>
    <script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-50c5d7cd149035aa"></script>

    <!-- analytics -->
    <script>
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

        ga('create', 'UA-20080950-1', 'auto');
        ga('send', 'pageview');

    </script>


    </body>
</html>
